<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Customer Tickets - Admin Panel</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: #f4f6f8;
      font-family: 'Segoe UI', sans-serif;
    }
    .glass {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
      border-radius: 1rem;
      padding: 1rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
    }
  </style>
</head>
<body class="p-6">

  <h1 class="text-2xl font-bold mb-6">üìá Customer Tickets - Admin Panel</h1>
  
  <div id="ticketsContainer" class="space-y-4"></div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDLvrY6y3SyvLrX-yk8UcdO8RmnC89XNG4",
      authDomain: "jdms-207ba.firebaseapp.com",
      projectId: "jdms-207ba",
      storageBucket: "jdms-207ba.appspot.com",
      messagingSenderId: "449814553435",
      appId: "1:449814553435:web:008c7695473689f425307e"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    function loadTickets() {
      db.collection("support_tickets").orderBy("createdAt", "desc").get().then(snapshot => {
        const container = document.getElementById("ticketsContainer");
        if (snapshot.empty) {
          container.innerHTML = `<p class="text-gray-600">No tickets found.</p>`;
          return;
        }

        snapshot.forEach(doc => {
          const d = doc.data();
          const el = document.createElement("div");
          el.className = "glass";
          el.innerHTML = `
            <p><strong>Customer ID:</strong> ${d.customerId}</p>
            <p><strong>Subject:</strong> ${d.subject}</p>
            <p><strong>Category:</strong> ${d.category}</p>
            <p><strong>Message:</strong> ${d.message}</p>
            <p><strong>Status:</strong> ${d.status}</p>
            <p><strong>Date:</strong> ${new Date(d.createdAt).toLocaleString()}</p>
          `;
          container.appendChild(el);
        });
      }).catch(err => {
        document.getElementById("ticketsContainer").innerHTML = `‚ùå Error: ${err.message}`;
      });
    }

    loadTickets();
  </script>
</body>
</html>
